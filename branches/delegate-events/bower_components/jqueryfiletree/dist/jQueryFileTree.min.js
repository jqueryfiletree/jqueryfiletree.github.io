!function(e,t){var n;return n=function(){function t(t,n,r){var i,a;i=e(t),a={root:"/",script:"/files/filetree",folderEvent:"click",expandSpeed:500,collapseSpeed:500,expandEasing:"swing",collapseEasing:"swing",multiFolder:!0,loadMessage:"Loading...",errorMessage:"Unable to get file tree information",multiSelect:!1,onlyFolders:!1,onlyFiles:!1},this.jqft={container:i},this.options=e.extend(a,n),this.callback=r,i.html('<ul class="jqueryFileTree start"><li class="wait">'+this.options.loadMessage+"<li></ul>"),this.showTree(i,escape(this.options.root)),i.delegate("li a",this.options.folderEvent,function(t){return function(n){var i,a,l,s,o;return i=e(n.target),s=t.options,l=t.jqft,t=t,r=t.callback,a={},a.li=i.closest("li"),a.type=null!=(o=a.li.hasClass("directory"))?o:{directory:"file"},a.value=i.text(),a.rel=i.prop("rel"),a.container=l.container,i.parent().hasClass("directory")?i.parent().hasClass("collapsed")?(t._trigger(i,"filetreeexpand",a),s.multiFolder||(i.parent().parent().find("UL").slideUp({duration:s.collapseSpeed,easing:s.collapseEasing}),i.parent().parent().find("LI.directory").removeClass("expanded").addClass("collapsed")),i.parent().removeClass("collapsed").addClass("expanded"),i.parent().find("UL").remove(),t.showTree(i.parent(),i.attr("rel")),t._trigger(i,"filetreeexpanded",a)):(t._trigger(i,"filetreecollapse",a),i.parent().find("UL").slideUp({duration:s.collapseSpeed,easing:s.collapseEasing}),i.parent().removeClass("expanded").addClass("collapsed"),t._trigger(i,"filetreecollapsed",a)):(s.multiSelect?i.parent().find("input").is(":checked")?(i.parent().find("input").prop("checked",!1),i.parent().removeClass("selected")):(i.parent().find("input").prop("checked",!0),i.parent().addClass("selected")):(l.container.find("li").removeClass("selected"),i.parent().addClass("selected")),t._trigger(i,"filetreeclicked",a),"function"==typeof r?r(i.attr("rel")):void 0)}}(this))}return t.prototype.showTree=function(t,n){var r,i,a,l,s,o,d;return r=e(t),o=this.options,i=this,r.addClass("wait"),e(".jqueryFileTree.start").remove(),a={dir:n,onlyFolders:o.onlyFolders,onlyFiles:o.onlyFiles,multiSelect:o.multiSelect},s=function(t){var i;return r.find(".start").html(""),r.removeClass("wait").append(t),o.root===n?r.find("UL:hidden").show("undefined"!=typeof callback&&null!==callback):(void 0===jQuery.easing[o.expandEasing]&&(console.log("Easing library not loaded. Include jQueryUI or 3rd party lib."),o.expandEasing="swing"),r.find("UL:hidden").slideDown({duration:o.expandSpeed,easing:o.expandEasing})),i=e('[rel="'+decodeURIComponent(n)+'"]').parent(),o.multiSelect&&i.children("input").is(":checked")&&i.find("ul li input").each(function(){return e(this).prop("checked",!0),e(this).parent().addClass("selected")}),!1},l=function(){return r.find(".start").html(""),r.removeClass("wait").append("<p>"+o.errorMessage+"</p>"),!1},"function"==typeof o.script?(d=o.script(a),"string"==typeof d||d instanceof jQuery?s(d):l()):e.ajax({url:o.script,type:"POST",dataType:"HTML",data:a}).done(function(e){return s(e)}).fail(function(){return l()})},t.prototype._trigger=function(t,n,r){var i;return i=e(t),i.trigger(n,r)},t}(),e.fn.extend({fileTree:function(t,r){return this.each(function(){var i,a;return i=e(this),a=i.data("fileTree"),a||i.data("fileTree",a=new n(this,t,r)),"string"==typeof t?a[option].apply(a):void 0})}})}(window.jQuery,window);